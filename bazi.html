<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>å°ˆæ¥­å…«å­—å‘½ç›¤åˆ†æ 2025</title>
    <script src="https://unpkg.com/lunar-javascript/lunar.js"></script>
    <style>
        :root { --main-red: #b33939; --bg-gold: #f7f1e3; }
        body { font-family: -apple-system, sans-serif; background: #f0f0f0; margin: 0; padding: 10px; }
        .app-container { max-width: 600px; margin: auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .header { background: var(--main-red); color: white; padding: 20px; text-align: center; }
        .content { padding: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #333; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        
        button { 
            width: 100%; padding: 15px; background: var(--main-red); color: white; 
            border: none; border-radius: 8px; font-size: 18px; font-weight: bold; 
            cursor: pointer; transition: 0.3s;
        }
        button:disabled { background: #ccc; }

        #result { display: none; margin-top: 20px; border-top: 2px solid #eee; padding-top: 20px; }
        .bazi-box { display: flex; justify-content: space-between; margin: 15px 0; }
        .bazi-item { flex: 1; text-align: center; background: var(--bg-gold); margin: 2px; padding: 10px; border-radius: 4px; }
        .bazi-label { font-size: 12px; color: #666; }
        .bazi-val { font-size: 20px; font-weight: bold; color: #222; }
        
        .card { background: #fff9e6; border-left: 4px solid var(--main-red); padding: 15px; margin-bottom: 15px; line-height: 1.6; }
        .fortune-title { color: var(--main-red); font-weight: bold; margin-bottom: 8px; border-bottom: 1px solid #ddd; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">
        <h2 style="margin:0">ğŸ”® å…«å­—å‘½ç›¤åˆ†æ</h2>
        <small id="statusText">ç³»çµ±åˆå§‹åŒ–ä¸­...</small>
    </div>

    <div class="content">
        <div class="input-group">
            <label>å‡ºç”Ÿæ—¥æœŸ (å…¬æ›†)</label>
            <input type="date" id="birthDate" value="1995-01-01">
        </div>
        <div class="input-group">
            <label>å‡ºç”Ÿæ™‚è¾°</label>
            <select id="birthHour">
                <option value="0">00:00 - å­æ™‚</option>
                <option value="1">01:00 - ä¸‘æ™‚</option>
                <option value="3">03:00 - å¯…æ™‚</option>
                <option value="5">05:00 - å¯æ™‚</option>
                <option value="7">07:00 - è¾°æ™‚</option>
                <option value="9">09:00 - å·³æ™‚</option>
                <option value="11">11:00 - åˆæ™‚</option>
                <option value="13">13:00 - æœªæ™‚</option>
                <option value="15">15:00 - ç”³æ™‚</option>
                <option value="17">17:00 - é…‰æ™‚</option>
                <option value="19">19:00 - æˆŒæ™‚</option>
                <option value="21">21:00 - äº¥æ™‚</option>
                <option value="23">23:00 - å­æ™‚</option>
            </select>
        </div>
        <button id="calcBtn" onclick="mainHandler()" disabled>æ­£åœ¨è¼‰å…¥è¨ˆç®—æ¨¡çµ„...</button>

        <div id="result">
            <div id="lunarDate" style="text-align:center; font-weight:bold; color:#b33939; margin-bottom:10px;"></div>
            
            <div class="bazi-box" id="baziDisplay"></div>

            <div class="card">
                <div class="fortune-title">ğŸŒŸ æ€§æ ¼å‘½æ ¼è§£æ</div>
                <div id="characterText"></div>
            </div>

            <div class="card" style="background-color: #f0f7ff; border-left-color: #2980b9;">
                <div class="fortune-title" style="color:#2980b9">ğŸ“… 2025 ä¹™å·³å¹´æµå¹´é‹å‹¢</div>
                <div id="fortuneText"></div>
            </div>
        </div>
    </div>
</div>

<script>
    // æª¢æŸ¥åº«æ˜¯å¦åŠ è¼‰æˆåŠŸ
    window.onload = function() {
        if (typeof Solar !== 'undefined') {
            document.getElementById('calcBtn').disabled = false;
            document.getElementById('calcBtn').innerText = 'é–‹å§‹æ’ç›¤åˆ†æ';
            document.getElementById('statusText').innerText = 'ç³»çµ±æº–å‚™å°±ç·’';
        } else {
            document.getElementById('statusText').innerText = 'æ ¸å¿ƒåº«è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯å¾Œé‡æ–°æ•´ç†';
            document.getElementById('statusText').style.color = 'yellow';
        }
    };

    function mainHandler() {
        try {
            const dateStr = document.getElementById('birthDate').value;
            const hour = parseInt(document.getElementById('birthHour').value);
            if (!dateStr) return alert("è«‹é¸æ“‡æ—¥æœŸ");

            const [y, m, d] = dateStr.split('-').map(Number);
            
            // é‹ç®—
            const solar = Solar.fromYmdHms(y, m, d, hour, 0, 0);
            const lunar = solar.getLunar();
            const eb = lunar.getEightChar();
            
            // é¡¯ç¤ºè¾²æ›†
            document.getElementById('lunarDate').innerText = 
                `è¾²æ›†ï¼š${lunar.getYearInGanZhi()}å¹´ ${lunar.getMonthInChinese()}æœˆ ${lunar.getDayInChinese()}`;

            // é¡¯ç¤ºå…«å­—æ’ç›¤
            const baziData = [
                { label: 'å¹´æŸ±', val: eb.getYearGan() + eb.getYearZhi() },
                { label: 'æœˆæŸ±', val: eb.getMonthGan() + eb.getMonthZhi() },
                { label: 'æ—¥æŸ±', val: eb.getDayGan() + eb.getDayZhi() },
                { label: 'æ™‚æŸ±', val: eb.getHourGan() + eb.getHourZhi() }
            ];
            
            document.getElementById('baziDisplay').innerHTML = baziData.map(item => `
                <div class="bazi-item">
                    <div class="bazi-label">${item.label}</div>
                    <div class="bazi-val">${item.val}</div>
                </div>
            `).join('');

            // æ€§æ ¼åˆ†æ
            const dayGan = eb.getDayGan();
            document.getElementById('characterText').innerText = getCharAdvice(dayGan);

            // 2025 æµå¹´åˆ†æ (ä¹™å·³å¹´)
            document.getElementById('fortuneText').innerHTML = get2025Advice(dayGan);

            document.getElementById('result').style.display = 'block';
            window.scrollTo({ top: document.getElementById('result').offsetTop - 20, behavior: 'smooth' });

        } catch (e) {
            alert("è¨ˆç®—éç¨‹ä¸­ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¢ºä¿è¼¸å…¥æ­£ç¢ºã€‚");
            console.error(e);
        }
    }

    function getCharAdvice(gan) {
        const dict = {
            'ç”²': 'ã€ç”²æœ¨ã€‘åƒå¤©å¤§æ¨¹ï¼šç‚ºäººè€¿ç›´ï¼Œæœ‰ä¸Šé€²å¿ƒï¼Œè™•äº‹å¤§æ–¹ã€‚ä½†æœ‰æ™‚éæ–¼å›ºåŸ·ï¼Œä¸è¼•æ˜“ä½é ­ã€‚',
            'ä¹™': 'ã€ä¹™æœ¨ã€‘çº–æŸ”èŠ±è‰ï¼šå¿ƒæ€ç´°è†©ï¼Œå¯Œæœ‰åŒæƒ…å¿ƒï¼Œé©æ‡‰åŠ›å¼·ã€‚ä½†å…§å¿ƒè¼ƒç‚ºæ•æ„Ÿï¼Œå®¹æ˜“ç³¾çµã€‚',
            'ä¸™': 'ã€ä¸™ç«ã€‘å¤ªé™½ä¹‹ç«ï¼šç†±æƒ…é–‹æœ—ï¼Œè¡Œå‹•åŠ›å¼·ï¼Œå……æ»¿æ­£èƒ½é‡ã€‚ç¼ºé»æ˜¯æ€§å­æ€¥ï¼Œå®¹æ˜“è¡å‹•ã€‚',
            'ä¸': 'ã€ä¸ç«ã€‘ç‡ˆç‡­ä¹‹ç«ï¼šè§€å¯ŸåŠ›æ•éŠ³ï¼Œé‡è¦–ç´°ç¯€ï¼Œå¤–éœå…§ç†±ã€‚ä½†æœ‰æ™‚æ€æ…®éé‡ï¼Œå®¹æ˜“ç–²å‹ã€‚',
            'æˆŠ': 'ã€æˆŠåœŸã€‘é«˜å±±å¤§åœ°ï¼šæ€§æ ¼ç©©é‡ï¼Œé‡ä¿¡å®ˆç¾©ï¼ŒåŒ…å®¹åŠ›å¼·ã€‚ä½†ç¨é¡¯ä¿å®ˆï¼Œç¼ºä¹ä¸€äº›éˆæ´»æ€§ã€‚',
            'å·±': 'ã€å·±åœŸã€‘ç”°åœ’æ³¥åœŸï¼šå¤šæ‰å¤šè—ï¼Œå¿ƒæ€ç¸å¯†ï¼Œæ‡‚å¾—é«”è²¼ã€‚ä½†æœ‰æ™‚éæ–¼å…§æ–‚ï¼Œä¸å–„è¡¨é”ã€‚',
            'åºš': 'ã€åºšé‡‘ã€‘å‰›éµåˆ€åŠï¼šç‚ºäººæœæ–·ï¼Œç¾©æ°£åè¶³ï¼Œè¾¦äº‹ä¹¾è„†ã€‚ç¼ºé»æ˜¯èªªè©±éæ–¼ç›´ç™½ï¼Œæ˜“å¾—ç½ªäººã€‚',
            'è¾›': 'ã€è¾›é‡‘ã€‘ç å¯¶ç‰çŸ³ï¼šè¿½æ±‚ç²¾ç·»ï¼Œè‡ªå°Šå¿ƒå¼·ï¼Œè…¦ç­‹è½‰å¾—å¿«ã€‚ä½†æ€•å—æŒ«æŠ˜ï¼Œæœ‰æ™‚è¼ƒè™›æ¦®ã€‚',
            'å£¬': 'ã€å£¬æ°´ã€‘æ±Ÿæ²³å¤§æµ·ï¼šè°æ˜æœ‰æ™ºæ…§ï¼Œå¤§æ°£ä¸”ä¸æ‹˜å°ç¯€ã€‚ä½†æœ‰æ™‚éš¨æ³¢é€æµï¼Œå®šåŠ›ä¸è¶³ã€‚',
            'ç™¸': 'ã€ç™¸æ°´ã€‘é›¨éœ²æ¸…æ³‰ï¼šæº«æŸ”é«”è²¼ï¼Œæƒ³åƒåŠ›è±å¯Œã€‚ä½†æƒ…ç·’èµ·ä¼å¤§ï¼Œå®¹æ˜“è¢«ç’°å¢ƒå½±éŸ¿ã€‚'
        };
        return dict[gan] || "åˆ†æè¼‰å…¥ä¸­...";
    }

    function get2025Advice(dayGan) {
        // 2025 æ˜¯ä¹™å·³å¹´ (ä¹™æœ¨, å·³ç«)
        const advice = {
            'ç”²': 'ã€è²´äººåŠ©é‹ã€‘ä¹™æœ¨ç‚ºåŠ«è²¡ï¼Œä»Šå¹´æœƒé‡åˆ°å¿—åŒé“åˆçš„æœ‹å‹ï¼Œåˆä½œæ©Ÿæœƒå¤šã€‚ä½†ä¹Ÿå®¹æ˜“æœ‰æ”¯å‡ºï¼Œå»ºè­°ç©©å¥æŠ•è³‡ã€‚',
            'ä¹™': 'ã€æœ¬å‘½æ¯”è‚©ã€‘ä»Šå¹´èƒ½é‡é‡ç–Šï¼Œè‡ªæˆ‘æ„è­˜è½‰å¼·ã€‚é©åˆè¦åŠƒæ–°äº‹æ¥­ï¼Œä½†è¦æ³¨æ„äººéš›æºé€šï¼Œé¿å…å£èˆŒè¡çªã€‚',
            'ä¸™': 'ã€æœ¨ç«ç›¸ç”Ÿã€‘ä¹™æœ¨ç”Ÿä¸™ç«ï¼Œä»Šå¹´æ‰è¯èƒ½å¾—åˆ°ç™¼æ®ï¼Œè·å ´ä¸Šæœ‰æœ›ç²å¾—é•·è¼©ææ”œï¼Œå­¸æ¥­èˆ‡è·ä½æœ‰æ™‰å‡æ©Ÿæœƒã€‚',
            'ä¸': 'ã€å°æ˜Ÿç…§è€€ã€‘ä¹™æœ¨ç‚ºåå°ï¼Œä»Šå¹´å­¸ç¿’é‹æ¥µä½³ï¼Œé©åˆè€ƒç…§æˆ–é‘½ç ”å°ˆæ¥­æŠ€èƒ½ã€‚è¦æ³¨æ„å¿ƒç†å£“åŠ›ï¼Œé©æ™‚æ”¾é¬†ã€‚',
            'æˆŠ': 'ã€å®˜é‹é¡¯ç¾ã€‘ä¹™æœ¨å‰‹æˆŠåœŸï¼ˆå®˜æ®ºï¼‰ï¼Œä»Šå¹´äº‹æ¥­å£“åŠ›è¼ƒå¤§ï¼Œä½†ä¹Ÿæ˜¯å±•ç¾è²¬ä»»æ„Ÿçš„æ™‚æ©Ÿã€‚æ³¨æ„è·å ´ç´€å¾‹ï¼Œå‹é€¸çµåˆã€‚',
            'å·±': 'ã€è²¡å®˜å¹³è¡¡ã€‘ä»Šå¹´åœ¨å·¥ä½œä¸Šæœ‰è¼ƒå¤šè®Šå‹•èˆ‡æŒ‘æˆ°ï¼Œä½†å·³ç«æº«åœŸï¼Œæ•´é«”èƒ½ç©©å®šç™¼å±•ã€‚å»ºè­°ä¿æŒè€å¿ƒï¼Œå¿…æœ‰æ‰€ç²ã€‚',
            'åºš': 'ã€è²¡æ˜Ÿé€å‡ºã€‘ä¹™æœ¨ç‚ºåºšé‡‘ä¹‹è²¡ï¼Œä»Šå¹´è²¡é‹æ©Ÿæœƒå¢åŠ ï¼Œé©åˆç™¼å±•æ–œæ§“æˆ–å…¼è·ã€‚ä½†è¦æ³¨æ„æ„Ÿæƒ…ä¸–ç•Œçš„ç¶­ç¹«ã€‚',
            'è¾›': 'ã€åè²¡å…¥å‘½ã€‘ä¹™æœ¨ç‚ºè¾›é‡‘åè²¡ï¼Œä»Šå¹´å¯èƒ½æœƒæœ‰æ„æƒ³ä¸åˆ°çš„å°è²¡é€²å¸³ã€‚ä½†è¦æ³¨æ„èº«é«”å¥åº·ï¼Œé¿å…éåº¦å‹ç´¯ã€‚',
            'å£¬': 'ã€å‚·å®˜ç”Ÿè²¡ã€‘ä»Šå¹´å‰µæ„åè¶³ï¼Œé©åˆå¾äº‹è¨­è¨ˆã€ç‡ŸéŠ·é¡å·¥ä½œã€‚èªªè©±è¦æ³¨æ„åˆ†å¯¸ï¼Œé¿å…èˆ‡ä¸»ç®¡ç™¼ç”Ÿçˆ­åŸ·ã€‚',
            'ç™¸': 'ã€é£Ÿç¥å…¥æ­²ã€‘ä¹™æœ¨ç‚ºç™¸æ°´é£Ÿç¥ï¼Œä»Šå¹´ç”Ÿæ´»å“è³ªæå‡ï¼Œé£Ÿç¥¿é‹ä½³ï¼Œé©åˆäº«å—ç”Ÿæ´»æˆ–ç™¼å±•èˆˆè¶£æ„›å¥½ã€‚'
        };
        return advice[dayGan] || "é‹å‹¢è¨ˆç®—ä¸­...";
    }
</script>

</body>
</html>